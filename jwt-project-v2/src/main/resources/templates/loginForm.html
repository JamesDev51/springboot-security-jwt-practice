<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>로그인 페이지</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css" rel="stylesheet"/>
</head>
<body>
<h1>로그인 페이지</h1>
<hr/>
<!--<form action="/login" method="post">-->
  <input type="text" id="username" name="username" placeholder="Username"><br>
  <input type="password" id="password" name="password" placeholder="Password"><br>
  <button id="btn" type="submit">로그인</button>
<!--</form>-->
<a href="/oauth2/authorization/google">구글 로그인</a>
<a href="/oauth2/authorization/facebook">페이스북 로그인</a>
<a href="/oauth2/authorization/naver">네이버 로그인</a>
<a href="/joinForm">회원가입을 아직 하지 않으셨나요?</a>
<script>
    const username = document.getElementById("username");
    const password = document.getElementById("password");
    const btn = document.getElementById("btn")
    btn.addEventListener("click",function(){
        let data={
            username:username.value,
            password:password.value
        }
        $.ajax({
            url:"/login",
            type:"post",
            dataType:"json",
            contentType:"application/json",
            data:JSON.stringify(data)
        }).done(function(res){
            console.log(res)
            location.href=res.data.url
        }).fail(function (e){
            console.log(e)
        })
    })

</script>
</body>
</html>